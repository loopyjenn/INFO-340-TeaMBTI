{"ast":null,"code":"import firebase from '@firebase/app-compat';\nimport * as exp from '@firebase/auth/internal';\nimport { Component } from '@firebase/component';\nimport { isBrowserExtension, isReactNative, isNode, getUA, isIE, isIndexedDBAvailable, FirebaseError } from '@firebase/util';\nvar name = \"@firebase/auth-compat\";\nvar version = \"0.1.6\";\n\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\nconst CORDOVA_ONDEVICEREADY_TIMEOUT_MS = 1000;\nfunction _getCurrentScheme() {\n  var _a;\n  return ((_a = self === null || self === void 0 ? void 0 : self.location) === null || _a === void 0 ? void 0 : _a.protocol) || null;\n}\n/**\r\n * @return {boolean} Whether the current environment is http or https.\r\n */\nfunction _isHttpOrHttps() {\n  return _getCurrentScheme() === 'http:' || _getCurrentScheme() === 'https:';\n}\n/**\r\n * @param {?string=} ua The user agent.\r\n * @return {boolean} Whether the app is rendered in a mobile iOS or Android\r\n *     Cordova environment.\r\n */\nfunction _isAndroidOrIosCordovaScheme(ua = getUA()) {\n  return !!((_getCurrentScheme() === 'file:' || _getCurrentScheme() === 'ionic:') && ua.toLowerCase().match(/iphone|ipad|ipod|android/));\n}\n/**\r\n * @return {boolean} Whether the environment is a native environment, where\r\n *     CORS checks do not apply.\r\n */\nfunction _isNativeEnvironment() {\n  return isReactNative() || isNode();\n}\n/**\r\n * Checks whether the user agent is IE11.\r\n * @return {boolean} True if it is IE11.\r\n */\nfunction _isIe11() {\n  return isIE() && (document === null || document === void 0 ? void 0 : document.documentMode) === 11;\n}\n/**\r\n * Checks whether the user agent is Edge.\r\n * @param {string} userAgent The browser user agent string.\r\n * @return {boolean} True if it is Edge.\r\n */\nfunction _isEdge(ua = getUA()) {\n  return /Edge\\/\\d+/.test(ua);\n}\n/**\r\n * @param {?string=} opt_userAgent The navigator user agent.\r\n * @return {boolean} Whether local storage is not synchronized between an iframe\r\n *     and a popup of the same domain.\r\n */\nfunction _isLocalStorageNotSynchronized(ua = getUA()) {\n  return _isIe11() || _isEdge(ua);\n}\n/** @return {boolean} Whether web storage is supported. */\nfunction _isWebStorageSupported() {\n  try {\n    const storage = self.localStorage;\n    const key = exp._generateEventId();\n    if (storage) {\n      // setItem will throw an exception if we cannot access WebStorage (e.g.,\n      // Safari in private mode).\n      storage['setItem'](key, '1');\n      storage['removeItem'](key);\n      // For browsers where iframe web storage does not synchronize with a popup\n      // of the same domain, indexedDB is used for persistent storage. These\n      // browsers include IE11 and Edge.\n      // Make sure it is supported (IE11 and Edge private mode does not support\n      // that).\n      if (_isLocalStorageNotSynchronized()) {\n        // In such browsers, if indexedDB is not supported, an iframe cannot be\n        // notified of the popup sign in result.\n        return isIndexedDBAvailable();\n      }\n      return true;\n    }\n  } catch (e) {\n    // localStorage is not available from a worker. Test availability of\n    // indexedDB.\n    return _isWorker() && isIndexedDBAvailable();\n  }\n  return false;\n}\n/**\r\n * @param {?Object=} global The optional global scope.\r\n * @return {boolean} Whether current environment is a worker.\r\n */\nfunction _isWorker() {\n  // WorkerGlobalScope only defined in worker environment.\n  return typeof global !== 'undefined' && 'WorkerGlobalScope' in global && 'importScripts' in global;\n}\nfunction _isPopupRedirectSupported() {\n  return (_isHttpOrHttps() || isBrowserExtension() || _isAndroidOrIosCordovaScheme()) &&\n  // React Native with remote debugging reports its location.protocol as\n  // http.\n  !_isNativeEnvironment() &&\n  // Local storage has to be supported for browser popup and redirect\n  // operations to work.\n  _isWebStorageSupported() &&\n  // DOM, popups and redirects are not supported within a worker.\n  !_isWorker();\n}\n/** Quick check that indicates the platform *may* be Cordova */\nfunction _isLikelyCordova() {\n  return _isAndroidOrIosCordovaScheme() && typeof document !== 'undefined';\n}\nasync function _isCordova() {\n  if (!_isLikelyCordova()) {\n    return false;\n  }\n  return new Promise(resolve => {\n    const timeoutId = setTimeout(() => {\n      // We've waited long enough; the telltale Cordova event didn't happen\n      resolve(false);\n    }, CORDOVA_ONDEVICEREADY_TIMEOUT_MS);\n    document.addEventListener('deviceready', () => {\n      clearTimeout(timeoutId);\n      resolve(true);\n    });\n  });\n}\n\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\nconst Persistence = {\n  LOCAL: 'local',\n  NONE: 'none',\n  SESSION: 'session'\n};\nconst _assert$3 = exp._assert;\nconst PERSISTENCE_KEY = 'persistence';\n/**\r\n * Validates that an argument is a valid persistence value. If an invalid type\r\n * is specified, an error is thrown synchronously.\r\n */\nfunction _validatePersistenceArgument(auth, persistence) {\n  _assert$3(Object.values(Persistence).includes(persistence), auth, \"invalid-persistence-type\" /* INVALID_PERSISTENCE */);\n  // Validate if the specified type is supported in the current environment.\n  if (isReactNative()) {\n    // This is only supported in a browser.\n    _assert$3(persistence !== Persistence.SESSION, auth, \"unsupported-persistence-type\" /* UNSUPPORTED_PERSISTENCE */);\n    return;\n  }\n  if (isNode()) {\n    // Only none is supported in Node.js.\n    _assert$3(persistence === Persistence.NONE, auth, \"unsupported-persistence-type\" /* UNSUPPORTED_PERSISTENCE */);\n    return;\n  }\n  if (_isWorker()) {\n    // In a worker environment, either LOCAL or NONE are supported.\n    // If indexedDB not supported and LOCAL provided, throw an error\n    _assert$3(persistence === Persistence.NONE || persistence === Persistence.LOCAL && isIndexedDBAvailable(), auth, \"unsupported-persistence-type\" /* UNSUPPORTED_PERSISTENCE */);\n    return;\n  }\n  // This is restricted by what the browser supports.\n  _assert$3(persistence === Persistence.NONE || _isWebStorageSupported(), auth, \"unsupported-persistence-type\" /* UNSUPPORTED_PERSISTENCE */);\n}\nasync function _savePersistenceForRedirect(auth) {\n  await auth._initializationPromise;\n  const win = getSelfWindow();\n  const key = exp._persistenceKeyName(PERSISTENCE_KEY, auth.config.apiKey, auth.name);\n  if (win === null || win === void 0 ? void 0 : win.sessionStorage) {\n    win.sessionStorage.setItem(key, auth._getPersistence());\n  }\n}\nfunction _getPersistencesFromRedirect(apiKey, appName) {\n  const win = getSelfWindow();\n  if (!(win === null || win === void 0 ? void 0 : win.sessionStorage)) {\n    return [];\n  }\n  const key = exp._persistenceKeyName(PERSISTENCE_KEY, apiKey, appName);\n  const persistence = win.sessionStorage.getItem(key);\n  switch (persistence) {\n    case Persistence.NONE:\n      return [exp.inMemoryPersistence];\n    case Persistence.LOCAL:\n      return [exp.indexedDBLocalPersistence, exp.browserSessionPersistence];\n    case Persistence.SESSION:\n      return [exp.browserSessionPersistence];\n    default:\n      return [];\n  }\n}\nfunction getSelfWindow() {\n  return typeof window !== 'undefined' ? window : null;\n}\n\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\nconst _assert$2 = exp._assert;\n/** Platform-agnostic popup-redirect resolver */\nclass CompatPopupRedirectResolver {\n  constructor() {\n    // Create both resolvers for dynamic resolution later\n    this.browserResolver = exp._getInstance(exp.browserPopupRedirectResolver);\n    this.cordovaResolver = exp._getInstance(exp.cordovaPopupRedirectResolver);\n    // The actual resolver in use: either browserResolver or cordovaResolver.\n    this.underlyingResolver = null;\n    this._redirectPersistence = exp.browserSessionPersistence;\n    this._completeRedirectFn = exp._getRedirectResult;\n  }\n  async _initialize(auth) {\n    await this.selectUnderlyingResolver();\n    return this.assertedUnderlyingResolver._initialize(auth);\n  }\n  async _openPopup(auth, provider, authType, eventId) {\n    await this.selectUnderlyingResolver();\n    return this.assertedUnderlyingResolver._openPopup(auth, provider, authType, eventId);\n  }\n  async _openRedirect(auth, provider, authType, eventId) {\n    await this.selectUnderlyingResolver();\n    return this.assertedUnderlyingResolver._openRedirect(auth, provider, authType, eventId);\n  }\n  _isIframeWebStorageSupported(auth, cb) {\n    this.assertedUnderlyingResolver._isIframeWebStorageSupported(auth, cb);\n  }\n  _originValidation(auth) {\n    return this.assertedUnderlyingResolver._originValidation(auth);\n  }\n  get _shouldInitProactively() {\n    return _isLikelyCordova() || this.browserResolver._shouldInitProactively;\n  }\n  get assertedUnderlyingResolver() {\n    _assert$2(this.underlyingResolver, \"internal-error\" /* INTERNAL_ERROR */);\n    return this.underlyingResolver;\n  }\n  async selectUnderlyingResolver() {\n    if (this.underlyingResolver) {\n      return;\n    }\n    // We haven't yet determined whether or not we're in Cordova; go ahead\n    // and determine that state now.\n    const isCordova = await _isCordova();\n    this.underlyingResolver = isCordova ? this.cordovaResolver : this.browserResolver;\n  }\n}\n\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\nfunction unwrap(object) {\n  return object.unwrap();\n}\nfunction wrapped(object) {\n  return object.wrapped();\n}\n\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\nfunction credentialFromResponse(userCredential) {\n  return credentialFromObject(userCredential);\n}\nfunction attachExtraErrorFields(auth, e) {\n  var _a;\n  // The response contains all fields from the server which may or may not\n  // actually match the underlying type\n  const response = (_a = e.customData) === null || _a === void 0 ? void 0 : _a._tokenResponse;\n  if (e.code === 'auth/multi-factor-auth-required') {\n    const mfaErr = e;\n    mfaErr.resolver = new MultiFactorResolver(auth, exp.getMultiFactorResolver(auth, e));\n  } else if (response) {\n    const credential = credentialFromObject(e);\n    const credErr = e;\n    if (credential) {\n      credErr.credential = credential;\n      credErr.tenantId = response.tenantId || undefined;\n      credErr.email = response.email || undefined;\n      credErr.phoneNumber = response.phoneNumber || undefined;\n    }\n  }\n}\nfunction credentialFromObject(object) {\n  const {\n    _tokenResponse\n  } = object instanceof FirebaseError ? object.customData : object;\n  if (!_tokenResponse) {\n    return null;\n  }\n  // Handle phone Auth credential responses, as they have a different format\n  // from other backend responses (i.e. no providerId). This is also only the\n  // case for user credentials (does not work for errors).\n  if (!(object instanceof FirebaseError)) {\n    if ('temporaryProof' in _tokenResponse && 'phoneNumber' in _tokenResponse) {\n      return exp.PhoneAuthProvider.credentialFromResult(object);\n    }\n  }\n  const providerId = _tokenResponse.providerId;\n  // Email and password is not supported as there is no situation where the\n  // server would return the password to the client.\n  if (!providerId || providerId === exp.ProviderId.PASSWORD) {\n    return null;\n  }\n  let provider;\n  switch (providerId) {\n    case exp.ProviderId.GOOGLE:\n      provider = exp.GoogleAuthProvider;\n      break;\n    case exp.ProviderId.FACEBOOK:\n      provider = exp.FacebookAuthProvider;\n      break;\n    case exp.ProviderId.GITHUB:\n      provider = exp.GithubAuthProvider;\n      break;\n    case exp.ProviderId.TWITTER:\n      provider = exp.TwitterAuthProvider;\n      break;\n    default:\n      const {\n        oauthIdToken,\n        oauthAccessToken,\n        oauthTokenSecret,\n        pendingToken,\n        nonce\n      } = _tokenResponse;\n      if (!oauthAccessToken && !oauthTokenSecret && !oauthIdToken && !pendingToken) {\n        return null;\n      }\n      // TODO(avolkovi): uncomment this and get it working with SAML & OIDC\n      if (pendingToken) {\n        if (providerId.startsWith('saml.')) {\n          return exp.SAMLAuthCredential._create(providerId, pendingToken);\n        } else {\n          // OIDC and non-default providers excluding Twitter.\n          return exp.OAuthCredential._fromParams({\n            providerId,\n            signInMethod: providerId,\n            pendingToken,\n            idToken: oauthIdToken,\n            accessToken: oauthAccessToken\n          });\n        }\n      }\n      return new exp.OAuthProvider(providerId).credential({\n        idToken: oauthIdToken,\n        accessToken: oauthAccessToken,\n        rawNonce: nonce\n      });\n  }\n  return object instanceof FirebaseError ? provider.credentialFromError(object) : provider.credentialFromResult(object);\n}\nfunction convertCredential(auth, credentialPromise) {\n  return credentialPromise.catch(e => {\n    if (e instanceof FirebaseError) {\n      attachExtraErrorFields(auth, e);\n    }\n    throw e;\n  }).then(credential => {\n    const operationType = credential.operationType;\n    const user = credential.user;\n    return {\n      operationType,\n      credential: credentialFromResponse(credential),\n      additionalUserInfo: exp.getAdditionalUserInfo(credential),\n      user: User.getOrCreate(user)\n    };\n  });\n}\nasync function convertConfirmationResult(auth, confirmationResultPromise) {\n  const confirmationResultExp = await confirmationResultPromise;\n  return {\n    verificationId: confirmationResultExp.verificationId,\n    confirm: verificationCode => convertCredential(auth, confirmationResultExp.confirm(verificationCode))\n  };\n}\nclass MultiFactorResolver {\n  constructor(auth, resolver) {\n    this.resolver = resolver;\n    this.auth = wrapped(auth);\n  }\n  get session() {\n    return this.resolver.session;\n  }\n  get hints() {\n    return this.resolver.hints;\n  }\n  resolveSignIn(assertion) {\n    return convertCredential(unwrap(this.auth), this.resolver.resolveSignIn(assertion));\n  }\n}\n\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\nclass User {\n  constructor(_delegate) {\n    this._delegate = _delegate;\n    this.multiFactor = exp.multiFactor(_delegate);\n  }\n  static getOrCreate(user) {\n    if (!User.USER_MAP.has(user)) {\n      User.USER_MAP.set(user, new User(user));\n    }\n    return User.USER_MAP.get(user);\n  }\n  delete() {\n    return this._delegate.delete();\n  }\n  reload() {\n    return this._delegate.reload();\n  }\n  toJSON() {\n    return this._delegate.toJSON();\n  }\n  getIdTokenResult(forceRefresh) {\n    return this._delegate.getIdTokenResult(forceRefresh);\n  }\n  getIdToken(forceRefresh) {\n    return this._delegate.getIdToken(forceRefresh);\n  }\n  linkAndRetrieveDataWithCredential(credential) {\n    return this.linkWithCredential(credential);\n  }\n  async linkWithCredential(credential) {\n    return convertCredential(this.auth, exp.linkWithCredential(this._delegate, credential));\n  }\n  async linkWithPhoneNumber(phoneNumber, applicationVerifier) {\n    return convertConfirmationResult(this.auth, exp.linkWithPhoneNumber(this._delegate, phoneNumber, applicationVerifier));\n  }\n  async linkWithPopup(provider) {\n    return convertCredential(this.auth, exp.linkWithPopup(this._delegate, provider, CompatPopupRedirectResolver));\n  }\n  async linkWithRedirect(provider) {\n    await _savePersistenceForRedirect(exp._castAuth(this.auth));\n    return exp.linkWithRedirect(this._delegate, provider, CompatPopupRedirectResolver);\n  }\n  reauthenticateAndRetrieveDataWithCredential(credential) {\n    return this.reauthenticateWithCredential(credential);\n  }\n  async reauthenticateWithCredential(credential) {\n    return convertCredential(this.auth, exp.reauthenticateWithCredential(this._delegate, credential));\n  }\n  reauthenticateWithPhoneNumber(phoneNumber, applicationVerifier) {\n    return convertConfirmationResult(this.auth, exp.reauthenticateWithPhoneNumber(this._delegate, phoneNumber, applicationVerifier));\n  }\n  reauthenticateWithPopup(provider) {\n    return convertCredential(this.auth, exp.reauthenticateWithPopup(this._delegate, provider, CompatPopupRedirectResolver));\n  }\n  async reauthenticateWithRedirect(provider) {\n    await _savePersistenceForRedirect(exp._castAuth(this.auth));\n    return exp.reauthenticateWithRedirect(this._delegate, provider, CompatPopupRedirectResolver);\n  }\n  sendEmailVerification(actionCodeSettings) {\n    return exp.sendEmailVerification(this._delegate, actionCodeSettings);\n  }\n  async unlink(providerId) {\n    await exp.unlink(this._delegate, providerId);\n    return this;\n  }\n  updateEmail(newEmail) {\n    return exp.updateEmail(this._delegate, newEmail);\n  }\n  updatePassword(newPassword) {\n    return exp.updatePassword(this._delegate, newPassword);\n  }\n  updatePhoneNumber(phoneCredential) {\n    return exp.updatePhoneNumber(this._delegate, phoneCredential);\n  }\n  updateProfile(profile) {\n    return exp.updateProfile(this._delegate, profile);\n  }\n  verifyBeforeUpdateEmail(newEmail, actionCodeSettings) {\n    return exp.verifyBeforeUpdateEmail(this._delegate, newEmail, actionCodeSettings);\n  }\n  get emailVerified() {\n    return this._delegate.emailVerified;\n  }\n  get isAnonymous() {\n    return this._delegate.isAnonymous;\n  }\n  get metadata() {\n    return this._delegate.metadata;\n  }\n  get phoneNumber() {\n    return this._delegate.phoneNumber;\n  }\n  get providerData() {\n    return this._delegate.providerData;\n  }\n  get refreshToken() {\n    return this._delegate.refreshToken;\n  }\n  get tenantId() {\n    return this._delegate.tenantId;\n  }\n  get displayName() {\n    return this._delegate.displayName;\n  }\n  get email() {\n    return this._delegate.email;\n  }\n  get photoURL() {\n    return this._delegate.photoURL;\n  }\n  get providerId() {\n    return this._delegate.providerId;\n  }\n  get uid() {\n    return this._delegate.uid;\n  }\n  get auth() {\n    return this._delegate.auth;\n  }\n}\n// Maintain a map so that there's always a 1:1 mapping between new User and\n// legacy compat users\nUser.USER_MAP = new WeakMap();\n\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\nconst _assert$1 = exp._assert;\nclass Auth {\n  constructor(app, provider) {\n    this.app = app;\n    if (provider.isInitialized()) {\n      this._delegate = provider.getImmediate();\n      this.linkUnderlyingAuth();\n      return;\n    }\n    const {\n      apiKey\n    } = app.options;\n    // TODO: platform needs to be determined using heuristics\n    _assert$1(apiKey, \"invalid-api-key\" /* INVALID_API_KEY */, {\n      appName: app.name\n    });\n    let persistences = [exp.inMemoryPersistence];\n    // Only deal with persistences in web environments\n    if (typeof window !== 'undefined') {\n      // Note this is slightly different behavior: in this case, the stored\n      // persistence is checked *first* rather than last. This is because we want\n      // to prefer stored persistence type in the hierarchy.\n      persistences = _getPersistencesFromRedirect(apiKey, app.name);\n      for (const persistence of [exp.indexedDBLocalPersistence, exp.browserLocalPersistence, exp.browserSessionPersistence]) {\n        if (!persistences.includes(persistence)) {\n          persistences.push(persistence);\n        }\n      }\n    }\n    // TODO: platform needs to be determined using heuristics\n    _assert$1(apiKey, \"invalid-api-key\" /* INVALID_API_KEY */, {\n      appName: app.name\n    });\n    // Only use a popup/redirect resolver in browser environments\n    const resolver = typeof window !== 'undefined' ? CompatPopupRedirectResolver : undefined;\n    this._delegate = provider.initialize({\n      options: {\n        persistence: persistences,\n        popupRedirectResolver: resolver\n      }\n    });\n    this._delegate._updateErrorMap(exp.debugErrorMap);\n    this.linkUnderlyingAuth();\n  }\n  get emulatorConfig() {\n    return this._delegate.emulatorConfig;\n  }\n  get currentUser() {\n    if (!this._delegate.currentUser) {\n      return null;\n    }\n    return User.getOrCreate(this._delegate.currentUser);\n  }\n  get languageCode() {\n    return this._delegate.languageCode;\n  }\n  set languageCode(languageCode) {\n    this._delegate.languageCode = languageCode;\n  }\n  get settings() {\n    return this._delegate.settings;\n  }\n  get tenantId() {\n    return this._delegate.tenantId;\n  }\n  set tenantId(tid) {\n    this._delegate.tenantId = tid;\n  }\n  useDeviceLanguage() {\n    this._delegate.useDeviceLanguage();\n  }\n  signOut() {\n    return this._delegate.signOut();\n  }\n  useEmulator(url, options) {\n    exp.connectAuthEmulator(this._delegate, url, options);\n  }\n  applyActionCode(code) {\n    return exp.applyActionCode(this._delegate, code);\n  }\n  checkActionCode(code) {\n    return exp.checkActionCode(this._delegate, code);\n  }\n  confirmPasswordReset(code, newPassword) {\n    return exp.confirmPasswordReset(this._delegate, code, newPassword);\n  }\n  async createUserWithEmailAndPassword(email, password) {\n    return convertCredential(this._delegate, exp.createUserWithEmailAndPassword(this._delegate, email, password));\n  }\n  fetchProvidersForEmail(email) {\n    return this.fetchSignInMethodsForEmail(email);\n  }\n  fetchSignInMethodsForEmail(email) {\n    return exp.fetchSignInMethodsForEmail(this._delegate, email);\n  }\n  isSignInWithEmailLink(emailLink) {\n    return exp.isSignInWithEmailLink(this._delegate, emailLink);\n  }\n  async getRedirectResult() {\n    _assert$1(_isPopupRedirectSupported(), this._delegate, \"operation-not-supported-in-this-environment\" /* OPERATION_NOT_SUPPORTED */);\n    const credential = await exp.getRedirectResult(this._delegate, CompatPopupRedirectResolver);\n    if (!credential) {\n      return {\n        credential: null,\n        user: null\n      };\n    }\n    return convertCredential(this._delegate, Promise.resolve(credential));\n  }\n  // This function should only be called by frameworks (e.g. FirebaseUI-web) to log their usage.\n  // It is not intended for direct use by developer apps. NO jsdoc here to intentionally leave it\n  // out of autogenerated documentation pages to reduce accidental misuse.\n  addFrameworkForLogging(framework) {\n    exp.addFrameworkForLogging(this._delegate, framework);\n  }\n  onAuthStateChanged(nextOrObserver, errorFn, completed) {\n    const {\n      next,\n      error,\n      complete\n    } = wrapObservers(nextOrObserver, errorFn, completed);\n    return this._delegate.onAuthStateChanged(next, error, complete);\n  }\n  onIdTokenChanged(nextOrObserver, errorFn, completed) {\n    const {\n      next,\n      error,\n      complete\n    } = wrapObservers(nextOrObserver, errorFn, completed);\n    return this._delegate.onIdTokenChanged(next, error, complete);\n  }\n  sendSignInLinkToEmail(email, actionCodeSettings) {\n    return exp.sendSignInLinkToEmail(this._delegate, email, actionCodeSettings);\n  }\n  sendPasswordResetEmail(email, actionCodeSettings) {\n    return exp.sendPasswordResetEmail(this._delegate, email, actionCodeSettings || undefined);\n  }\n  async setPersistence(persistence) {\n    _validatePersistenceArgument(this._delegate, persistence);\n    let converted;\n    switch (persistence) {\n      case Persistence.SESSION:\n        converted = exp.browserSessionPersistence;\n        break;\n      case Persistence.LOCAL:\n        // Not using isIndexedDBAvailable() since it only checks if indexedDB is defined.\n        const isIndexedDBFullySupported = await exp._getInstance(exp.indexedDBLocalPersistence)._isAvailable();\n        converted = isIndexedDBFullySupported ? exp.indexedDBLocalPersistence : exp.browserLocalPersistence;\n        break;\n      case Persistence.NONE:\n        converted = exp.inMemoryPersistence;\n        break;\n      default:\n        return exp._fail(\"argument-error\" /* ARGUMENT_ERROR */, {\n          appName: this._delegate.name\n        });\n    }\n    return this._delegate.setPersistence(converted);\n  }\n  signInAndRetrieveDataWithCredential(credential) {\n    return this.signInWithCredential(credential);\n  }\n  signInAnonymously() {\n    return convertCredential(this._delegate, exp.signInAnonymously(this._delegate));\n  }\n  signInWithCredential(credential) {\n    return convertCredential(this._delegate, exp.signInWithCredential(this._delegate, credential));\n  }\n  signInWithCustomToken(token) {\n    return convertCredential(this._delegate, exp.signInWithCustomToken(this._delegate, token));\n  }\n  signInWithEmailAndPassword(email, password) {\n    return convertCredential(this._delegate, exp.signInWithEmailAndPassword(this._delegate, email, password));\n  }\n  signInWithEmailLink(email, emailLink) {\n    return convertCredential(this._delegate, exp.signInWithEmailLink(this._delegate, email, emailLink));\n  }\n  signInWithPhoneNumber(phoneNumber, applicationVerifier) {\n    return convertConfirmationResult(this._delegate, exp.signInWithPhoneNumber(this._delegate, phoneNumber, applicationVerifier));\n  }\n  async signInWithPopup(provider) {\n    _assert$1(_isPopupRedirectSupported(), this._delegate, \"operation-not-supported-in-this-environment\" /* OPERATION_NOT_SUPPORTED */);\n    return convertCredential(this._delegate, exp.signInWithPopup(this._delegate, provider, CompatPopupRedirectResolver));\n  }\n  async signInWithRedirect(provider) {\n    _assert$1(_isPopupRedirectSupported(), this._delegate, \"operation-not-supported-in-this-environment\" /* OPERATION_NOT_SUPPORTED */);\n    await _savePersistenceForRedirect(this._delegate);\n    return exp.signInWithRedirect(this._delegate, provider, CompatPopupRedirectResolver);\n  }\n  updateCurrentUser(user) {\n    // remove ts-ignore once overloads are defined for exp functions to accept compat objects\n    // @ts-ignore\n    return this._delegate.updateCurrentUser(user);\n  }\n  verifyPasswordResetCode(code) {\n    return exp.verifyPasswordResetCode(this._delegate, code);\n  }\n  unwrap() {\n    return this._delegate;\n  }\n  _delete() {\n    return this._delegate._delete();\n  }\n  linkUnderlyingAuth() {\n    this._delegate.wrapped = () => this;\n  }\n}\nAuth.Persistence = Persistence;\nfunction wrapObservers(nextOrObserver, error, complete) {\n  let next = nextOrObserver;\n  if (typeof nextOrObserver !== 'function') {\n    ({\n      next,\n      error,\n      complete\n    } = nextOrObserver);\n  }\n  // We know 'next' is now a function\n  const oldNext = next;\n  const newNext = user => oldNext(user && User.getOrCreate(user));\n  return {\n    next: newNext,\n    error: error,\n    complete\n  };\n}\n\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\nclass PhoneAuthProvider {\n  constructor() {\n    this.providerId = 'phone';\n    // TODO: remove ts-ignore when moving types from auth-types to auth-compat\n    // @ts-ignore\n    this._delegate = new exp.PhoneAuthProvider(unwrap(firebase.auth()));\n  }\n  static credential(verificationId, verificationCode) {\n    return exp.PhoneAuthProvider.credential(verificationId, verificationCode);\n  }\n  verifyPhoneNumber(phoneInfoOptions, applicationVerifier) {\n    return this._delegate.verifyPhoneNumber(\n    // The implementation matches but the types are subtly incompatible\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    phoneInfoOptions, applicationVerifier);\n  }\n  unwrap() {\n    return this._delegate;\n  }\n}\nPhoneAuthProvider.PHONE_SIGN_IN_METHOD = exp.PhoneAuthProvider.PHONE_SIGN_IN_METHOD;\nPhoneAuthProvider.PROVIDER_ID = exp.PhoneAuthProvider.PROVIDER_ID;\n\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\nconst _assert = exp._assert;\nclass RecaptchaVerifier {\n  constructor(container, parameters, app = firebase.app()) {\n    var _a;\n    // API key is required for web client RPC calls.\n    _assert((_a = app.options) === null || _a === void 0 ? void 0 : _a.apiKey, \"invalid-api-key\" /* INVALID_API_KEY */, {\n      appName: app.name\n    });\n    this._delegate = new exp.RecaptchaVerifier(container,\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    parameters,\n    // TODO: remove ts-ignore when moving types from auth-types to auth-compat\n    // @ts-ignore\n    app.auth());\n    this.type = this._delegate.type;\n  }\n  clear() {\n    this._delegate.clear();\n  }\n  render() {\n    return this._delegate.render();\n  }\n  verify() {\n    return this._delegate.verify();\n  }\n}\n\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\nconst AUTH_TYPE = 'auth-compat';\n// Create auth components to register with firebase.\n// Provides Auth public APIs.\nfunction registerAuthCompat(instance) {\n  instance.INTERNAL.registerComponent(new Component(AUTH_TYPE, container => {\n    // getImmediate for FirebaseApp will always succeed\n    const app = container.getProvider('app-compat').getImmediate();\n    const authProvider = container.getProvider('auth');\n    return new Auth(app, authProvider);\n  }, \"PUBLIC\" /* PUBLIC */).setServiceProps({\n    ActionCodeInfo: {\n      Operation: {\n        EMAIL_SIGNIN: exp.ActionCodeOperation.EMAIL_SIGNIN,\n        PASSWORD_RESET: exp.ActionCodeOperation.PASSWORD_RESET,\n        RECOVER_EMAIL: exp.ActionCodeOperation.RECOVER_EMAIL,\n        REVERT_SECOND_FACTOR_ADDITION: exp.ActionCodeOperation.REVERT_SECOND_FACTOR_ADDITION,\n        VERIFY_AND_CHANGE_EMAIL: exp.ActionCodeOperation.VERIFY_AND_CHANGE_EMAIL,\n        VERIFY_EMAIL: exp.ActionCodeOperation.VERIFY_EMAIL\n      }\n    },\n    EmailAuthProvider: exp.EmailAuthProvider,\n    FacebookAuthProvider: exp.FacebookAuthProvider,\n    GithubAuthProvider: exp.GithubAuthProvider,\n    GoogleAuthProvider: exp.GoogleAuthProvider,\n    OAuthProvider: exp.OAuthProvider,\n    //   SAMLAuthProvider,\n    PhoneAuthProvider: PhoneAuthProvider,\n    PhoneMultiFactorGenerator: exp.PhoneMultiFactorGenerator,\n    RecaptchaVerifier: RecaptchaVerifier,\n    TwitterAuthProvider: exp.TwitterAuthProvider,\n    Auth,\n    AuthCredential: exp.AuthCredential,\n    Error: FirebaseError\n  }).setInstantiationMode(\"LAZY\" /* LAZY */).setMultipleInstances(false));\n  instance.registerVersion(name, version);\n}\nregisterAuthCompat(firebase);","map":{"version":3,"names":["CORDOVA_ONDEVICEREADY_TIMEOUT_MS","_getCurrentScheme","_a","self","location","protocol","_isHttpOrHttps","_isAndroidOrIosCordovaScheme","ua","getUA","toLowerCase","match","_isNativeEnvironment","isReactNative","isNode","_isIe11","isIE","document","documentMode","_isEdge","test","_isLocalStorageNotSynchronized","_isWebStorageSupported","storage","localStorage","key","exp","_generateEventId","isIndexedDBAvailable","e","_isWorker","global","_isPopupRedirectSupported","isBrowserExtension","_isLikelyCordova","_isCordova","Promise","resolve","timeoutId","setTimeout","addEventListener","clearTimeout","Persistence","LOCAL","NONE","SESSION","_assert$3","_assert","PERSISTENCE_KEY","_validatePersistenceArgument","auth","persistence","Object","values","includes","_savePersistenceForRedirect","_initializationPromise","win","getSelfWindow","_persistenceKeyName","config","apiKey","name","sessionStorage","setItem","_getPersistence","_getPersistencesFromRedirect","appName","getItem","inMemoryPersistence","indexedDBLocalPersistence","browserSessionPersistence","window","_assert$2","CompatPopupRedirectResolver","constructor","browserResolver","_getInstance","browserPopupRedirectResolver","cordovaResolver","cordovaPopupRedirectResolver","underlyingResolver","_redirectPersistence","_completeRedirectFn","_getRedirectResult","_initialize","selectUnderlyingResolver","assertedUnderlyingResolver","_openPopup","provider","authType","eventId","_openRedirect","_isIframeWebStorageSupported","cb","_originValidation","_shouldInitProactively","isCordova","unwrap","object","wrapped","credentialFromResponse","userCredential","credentialFromObject","attachExtraErrorFields","response","customData","_tokenResponse","code","mfaErr","resolver","MultiFactorResolver","getMultiFactorResolver","credential","credErr","tenantId","undefined","email","phoneNumber","FirebaseError","PhoneAuthProvider","credentialFromResult","providerId","ProviderId","PASSWORD","GOOGLE","GoogleAuthProvider","FACEBOOK","FacebookAuthProvider","GITHUB","GithubAuthProvider","TWITTER","TwitterAuthProvider","oauthIdToken","oauthAccessToken","oauthTokenSecret","pendingToken","nonce","startsWith","SAMLAuthCredential","_create","OAuthCredential","_fromParams","signInMethod","idToken","accessToken","OAuthProvider","rawNonce","credentialFromError","convertCredential","credentialPromise","catch","then","operationType","user","additionalUserInfo","getAdditionalUserInfo","User","getOrCreate","convertConfirmationResult","confirmationResultPromise","confirmationResultExp","verificationId","confirm","verificationCode","session","hints","resolveSignIn","assertion","_delegate","multiFactor","USER_MAP","has","set","get","delete","reload","toJSON","getIdTokenResult","forceRefresh","getIdToken","linkAndRetrieveDataWithCredential","linkWithCredential","linkWithPhoneNumber","applicationVerifier","linkWithPopup","linkWithRedirect","_castAuth","reauthenticateAndRetrieveDataWithCredential","reauthenticateWithCredential","reauthenticateWithPhoneNumber","reauthenticateWithPopup","reauthenticateWithRedirect","sendEmailVerification","actionCodeSettings","unlink","updateEmail","newEmail","updatePassword","newPassword","updatePhoneNumber","phoneCredential","updateProfile","profile","verifyBeforeUpdateEmail","emailVerified","isAnonymous","metadata","providerData","refreshToken","displayName","photoURL","uid","WeakMap","_assert$1","Auth","app","isInitialized","getImmediate","linkUnderlyingAuth","options","persistences","browserLocalPersistence","push","initialize","popupRedirectResolver","_updateErrorMap","debugErrorMap","emulatorConfig","currentUser","languageCode","settings","tid","useDeviceLanguage","signOut","useEmulator","url","connectAuthEmulator","applyActionCode","checkActionCode","confirmPasswordReset","createUserWithEmailAndPassword","password","fetchProvidersForEmail","fetchSignInMethodsForEmail","isSignInWithEmailLink","emailLink","getRedirectResult","addFrameworkForLogging","framework","onAuthStateChanged","nextOrObserver","errorFn","completed","next","error","complete","wrapObservers","onIdTokenChanged","sendSignInLinkToEmail","sendPasswordResetEmail","setPersistence","converted","isIndexedDBFullySupported","_isAvailable","_fail","signInAndRetrieveDataWithCredential","signInWithCredential","signInAnonymously","signInWithCustomToken","token","signInWithEmailAndPassword","signInWithEmailLink","signInWithPhoneNumber","signInWithPopup","signInWithRedirect","updateCurrentUser","verifyPasswordResetCode","_delete","oldNext","newNext","firebase","verifyPhoneNumber","phoneInfoOptions","PHONE_SIGN_IN_METHOD","PROVIDER_ID","RecaptchaVerifier","container","parameters","type","clear","render","verify","AUTH_TYPE","registerAuthCompat","instance","INTERNAL","registerComponent","Component","getProvider","authProvider","setServiceProps","ActionCodeInfo","Operation","EMAIL_SIGNIN","ActionCodeOperation","PASSWORD_RESET","RECOVER_EMAIL","REVERT_SECOND_FACTOR_ADDITION","VERIFY_AND_CHANGE_EMAIL","VERIFY_EMAIL","EmailAuthProvider","PhoneMultiFactorGenerator","AuthCredential","Error","setInstantiationMode","setMultipleInstances","registerVersion","version"],"sources":["/Users/jenn/Desktop/info340/project-jsorror/node_modules/@firebase/auth-compat/src/platform.ts","/Users/jenn/Desktop/info340/project-jsorror/node_modules/@firebase/auth-compat/src/persistence.ts","/Users/jenn/Desktop/info340/project-jsorror/node_modules/@firebase/auth-compat/src/popup_redirect.ts","/Users/jenn/Desktop/info340/project-jsorror/node_modules/@firebase/auth-compat/src/wrap.ts","/Users/jenn/Desktop/info340/project-jsorror/node_modules/@firebase/auth-compat/src/user_credential.ts","/Users/jenn/Desktop/info340/project-jsorror/node_modules/@firebase/auth-compat/src/user.ts","/Users/jenn/Desktop/info340/project-jsorror/node_modules/@firebase/auth-compat/src/auth.ts","/Users/jenn/Desktop/info340/project-jsorror/node_modules/@firebase/auth-compat/src/phone_auth_provider.ts","/Users/jenn/Desktop/info340/project-jsorror/node_modules/@firebase/auth-compat/src/recaptcha_verifier.ts","/Users/jenn/Desktop/info340/project-jsorror/node_modules/@firebase/auth-compat/index.ts"],"sourcesContent":["/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport * as impl from '@firebase/auth/internal';\nimport {\n  getUA,\n  isBrowserExtension,\n  isReactNative,\n  isNode,\n  isIE,\n  isIndexedDBAvailable\n} from '@firebase/util';\n\ndeclare global {\n  interface Document {\n    documentMode?: number;\n  }\n}\n\nconst CORDOVA_ONDEVICEREADY_TIMEOUT_MS = 1000;\n\nfunction _getCurrentScheme(): string | null {\n  return self?.location?.protocol || null;\n}\n\n/**\n * @return {boolean} Whether the current environment is http or https.\n */\nfunction _isHttpOrHttps(): boolean {\n  return _getCurrentScheme() === 'http:' || _getCurrentScheme() === 'https:';\n}\n\n/**\n * @param {?string=} ua The user agent.\n * @return {boolean} Whether the app is rendered in a mobile iOS or Android\n *     Cordova environment.\n */\nexport function _isAndroidOrIosCordovaScheme(ua: string = getUA()): boolean {\n  return !!(\n    (_getCurrentScheme() === 'file:' || _getCurrentScheme() === 'ionic:') &&\n    ua.toLowerCase().match(/iphone|ipad|ipod|android/)\n  );\n}\n\n/**\n * @return {boolean} Whether the environment is a native environment, where\n *     CORS checks do not apply.\n */\nfunction _isNativeEnvironment(): boolean {\n  return isReactNative() || isNode();\n}\n\n/**\n * Checks whether the user agent is IE11.\n * @return {boolean} True if it is IE11.\n */\nfunction _isIe11(): boolean {\n  return isIE() && document?.documentMode === 11;\n}\n\n/**\n * Checks whether the user agent is Edge.\n * @param {string} userAgent The browser user agent string.\n * @return {boolean} True if it is Edge.\n */\nfunction _isEdge(ua: string = getUA()): boolean {\n  return /Edge\\/\\d+/.test(ua);\n}\n\n/**\n * @param {?string=} opt_userAgent The navigator user agent.\n * @return {boolean} Whether local storage is not synchronized between an iframe\n *     and a popup of the same domain.\n */\nfunction _isLocalStorageNotSynchronized(ua: string = getUA()): boolean {\n  return _isIe11() || _isEdge(ua);\n}\n\n/** @return {boolean} Whether web storage is supported. */\nexport function _isWebStorageSupported(): boolean {\n  try {\n    const storage = self.localStorage;\n    const key = impl._generateEventId();\n    if (storage) {\n      // setItem will throw an exception if we cannot access WebStorage (e.g.,\n      // Safari in private mode).\n      storage['setItem'](key, '1');\n      storage['removeItem'](key);\n      // For browsers where iframe web storage does not synchronize with a popup\n      // of the same domain, indexedDB is used for persistent storage. These\n      // browsers include IE11 and Edge.\n      // Make sure it is supported (IE11 and Edge private mode does not support\n      // that).\n      if (_isLocalStorageNotSynchronized()) {\n        // In such browsers, if indexedDB is not supported, an iframe cannot be\n        // notified of the popup sign in result.\n        return isIndexedDBAvailable();\n      }\n      return true;\n    }\n  } catch (e) {\n    // localStorage is not available from a worker. Test availability of\n    // indexedDB.\n    return _isWorker() && isIndexedDBAvailable();\n  }\n  return false;\n}\n\n/**\n * @param {?Object=} global The optional global scope.\n * @return {boolean} Whether current environment is a worker.\n */\nexport function _isWorker(): boolean {\n  // WorkerGlobalScope only defined in worker environment.\n  return (\n    typeof global !== 'undefined' &&\n    'WorkerGlobalScope' in global &&\n    'importScripts' in global\n  );\n}\n\nexport function _isPopupRedirectSupported(): boolean {\n  return (\n    (_isHttpOrHttps() ||\n      isBrowserExtension() ||\n      _isAndroidOrIosCordovaScheme()) &&\n    // React Native with remote debugging reports its location.protocol as\n    // http.\n    !_isNativeEnvironment() &&\n    // Local storage has to be supported for browser popup and redirect\n    // operations to work.\n    _isWebStorageSupported() &&\n    // DOM, popups and redirects are not supported within a worker.\n    !_isWorker()\n  );\n}\n\n/** Quick check that indicates the platform *may* be Cordova */\nexport function _isLikelyCordova(): boolean {\n  return _isAndroidOrIosCordovaScheme() && typeof document !== 'undefined';\n}\n\nexport async function _isCordova(): Promise<boolean> {\n  if (!_isLikelyCordova()) {\n    return false;\n  }\n\n  return new Promise(resolve => {\n    const timeoutId = setTimeout(() => {\n      // We've waited long enough; the telltale Cordova event didn't happen\n      resolve(false);\n    }, CORDOVA_ONDEVICEREADY_TIMEOUT_MS);\n\n    document.addEventListener('deviceready', () => {\n      clearTimeout(timeoutId);\n      resolve(true);\n    });\n  });\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport * as exp from '@firebase/auth/internal';\nimport { isIndexedDBAvailable, isNode, isReactNative } from '@firebase/util';\nimport { _isWebStorageSupported, _isWorker } from './platform';\n\nexport const Persistence = {\n  LOCAL: 'local',\n  NONE: 'none',\n  SESSION: 'session'\n};\n\nconst _assert: typeof exp._assert = exp._assert;\n\nconst PERSISTENCE_KEY = 'persistence';\n\n/**\n * Validates that an argument is a valid persistence value. If an invalid type\n * is specified, an error is thrown synchronously.\n */\nexport function _validatePersistenceArgument(\n  auth: exp.Auth,\n  persistence: string\n): void {\n  _assert(\n    Object.values(Persistence).includes(persistence),\n    auth,\n    exp.AuthErrorCode.INVALID_PERSISTENCE\n  );\n  // Validate if the specified type is supported in the current environment.\n  if (isReactNative()) {\n    // This is only supported in a browser.\n    _assert(\n      persistence !== Persistence.SESSION,\n      auth,\n      exp.AuthErrorCode.UNSUPPORTED_PERSISTENCE\n    );\n    return;\n  }\n  if (isNode()) {\n    // Only none is supported in Node.js.\n    _assert(\n      persistence === Persistence.NONE,\n      auth,\n      exp.AuthErrorCode.UNSUPPORTED_PERSISTENCE\n    );\n    return;\n  }\n  if (_isWorker()) {\n    // In a worker environment, either LOCAL or NONE are supported.\n    // If indexedDB not supported and LOCAL provided, throw an error\n    _assert(\n      persistence === Persistence.NONE ||\n        (persistence === Persistence.LOCAL && isIndexedDBAvailable()),\n      auth,\n      exp.AuthErrorCode.UNSUPPORTED_PERSISTENCE\n    );\n    return;\n  }\n  // This is restricted by what the browser supports.\n  _assert(\n    persistence === Persistence.NONE || _isWebStorageSupported(),\n    auth,\n    exp.AuthErrorCode.UNSUPPORTED_PERSISTENCE\n  );\n}\n\nexport async function _savePersistenceForRedirect(\n  auth: exp.AuthInternal\n): Promise<void> {\n  await auth._initializationPromise;\n\n  const win = getSelfWindow();\n  const key = exp._persistenceKeyName(\n    PERSISTENCE_KEY,\n    auth.config.apiKey,\n    auth.name\n  );\n  if (win?.sessionStorage) {\n    win.sessionStorage.setItem(key, auth._getPersistence());\n  }\n}\n\nexport function _getPersistencesFromRedirect(\n  apiKey: string,\n  appName: string\n): exp.Persistence[] {\n  const win = getSelfWindow();\n  if (!win?.sessionStorage) {\n    return [];\n  }\n\n  const key = exp._persistenceKeyName(PERSISTENCE_KEY, apiKey, appName);\n  const persistence = win.sessionStorage.getItem(key);\n\n  switch (persistence) {\n    case Persistence.NONE:\n      return [exp.inMemoryPersistence];\n    case Persistence.LOCAL:\n      return [exp.indexedDBLocalPersistence, exp.browserSessionPersistence];\n    case Persistence.SESSION:\n      return [exp.browserSessionPersistence];\n    default:\n      return [];\n  }\n}\n\nfunction getSelfWindow(): Window | null {\n  return typeof window !== 'undefined' ? window : null;\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport * as exp from '@firebase/auth/internal';\nimport { _isCordova, _isLikelyCordova } from './platform';\n\nconst _assert: typeof exp._assert = exp._assert;\n\n/** Platform-agnostic popup-redirect resolver */\nexport class CompatPopupRedirectResolver\n  implements exp.PopupRedirectResolverInternal\n{\n  // Create both resolvers for dynamic resolution later\n  private readonly browserResolver: exp.PopupRedirectResolverInternal =\n    exp._getInstance(exp.browserPopupRedirectResolver);\n  private readonly cordovaResolver: exp.PopupRedirectResolverInternal =\n    exp._getInstance(exp.cordovaPopupRedirectResolver);\n  // The actual resolver in use: either browserResolver or cordovaResolver.\n  private underlyingResolver: exp.PopupRedirectResolverInternal | null = null;\n  _redirectPersistence = exp.browserSessionPersistence;\n\n  _completeRedirectFn: (\n    auth: exp.Auth,\n    resolver: exp.PopupRedirectResolver,\n    bypassAuthState: boolean\n  ) => Promise<exp.UserCredential | null> = exp._getRedirectResult;\n\n  async _initialize(auth: exp.AuthImpl): Promise<exp.EventManager> {\n    await this.selectUnderlyingResolver();\n    return this.assertedUnderlyingResolver._initialize(auth);\n  }\n\n  async _openPopup(\n    auth: exp.AuthImpl,\n    provider: exp.AuthProvider,\n    authType: exp.AuthEventType,\n    eventId?: string\n  ): Promise<exp.AuthPopup> {\n    await this.selectUnderlyingResolver();\n    return this.assertedUnderlyingResolver._openPopup(\n      auth,\n      provider,\n      authType,\n      eventId\n    );\n  }\n\n  async _openRedirect(\n    auth: exp.AuthImpl,\n    provider: exp.AuthProvider,\n    authType: exp.AuthEventType,\n    eventId?: string\n  ): Promise<void> {\n    await this.selectUnderlyingResolver();\n    return this.assertedUnderlyingResolver._openRedirect(\n      auth,\n      provider,\n      authType,\n      eventId\n    );\n  }\n\n  _isIframeWebStorageSupported(\n    auth: exp.AuthImpl,\n    cb: (support: boolean) => unknown\n  ): void {\n    this.assertedUnderlyingResolver._isIframeWebStorageSupported(auth, cb);\n  }\n\n  _originValidation(auth: exp.Auth): Promise<void> {\n    return this.assertedUnderlyingResolver._originValidation(auth);\n  }\n\n  get _shouldInitProactively(): boolean {\n    return _isLikelyCordova() || this.browserResolver._shouldInitProactively;\n  }\n\n  private get assertedUnderlyingResolver(): exp.PopupRedirectResolverInternal {\n    _assert(this.underlyingResolver, exp.AuthErrorCode.INTERNAL_ERROR);\n    return this.underlyingResolver;\n  }\n\n  private async selectUnderlyingResolver(): Promise<void> {\n    if (this.underlyingResolver) {\n      return;\n    }\n\n    // We haven't yet determined whether or not we're in Cordova; go ahead\n    // and determine that state now.\n    const isCordova = await _isCordova();\n    this.underlyingResolver = isCordova\n      ? this.cordovaResolver\n      : this.browserResolver;\n  }\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/** Forward direction wrapper from Compat --unwrap-> Exp */\nexport interface Wrapper<T> {\n  unwrap(): T;\n}\n\n/** Reverse direction wrapper from Exp --wrapped--> Compat */\nexport interface ReverseWrapper<T> {\n  wrapped(): T;\n}\n\nexport function unwrap<T>(object: unknown): T {\n  return (object as Wrapper<T>).unwrap();\n}\n\nexport function wrapped<T>(object: unknown): T {\n  return (object as ReverseWrapper<T>).wrapped();\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport * as exp from '@firebase/auth/internal';\nimport * as compat from '@firebase/auth-types';\nimport { FirebaseError } from '@firebase/util';\nimport { Auth } from './auth';\nimport { User } from './user';\nimport { unwrap, wrapped } from './wrap';\n\nfunction credentialFromResponse(\n  userCredential: exp.UserCredentialInternal\n): exp.AuthCredential | null {\n  return credentialFromObject(userCredential);\n}\n\nfunction attachExtraErrorFields(auth: exp.Auth, e: FirebaseError): void {\n  // The response contains all fields from the server which may or may not\n  // actually match the underlying type\n  const response = (e.customData as exp.TaggedWithTokenResponse | undefined)\n    ?._tokenResponse as unknown as Record<string, string>;\n  if (e.code === 'auth/multi-factor-auth-required') {\n    const mfaErr = e as compat.MultiFactorError;\n    mfaErr.resolver = new MultiFactorResolver(\n      auth,\n      exp.getMultiFactorResolver(auth, e as exp.MultiFactorError)\n    );\n  } else if (response) {\n    const credential = credentialFromObject(e);\n    const credErr = e as compat.AuthError;\n    if (credential) {\n      credErr.credential = credential;\n      credErr.tenantId = response.tenantId || undefined;\n      credErr.email = response.email || undefined;\n      credErr.phoneNumber = response.phoneNumber || undefined;\n    }\n  }\n}\n\nfunction credentialFromObject(\n  object: FirebaseError | exp.UserCredential\n): exp.AuthCredential | null {\n  const { _tokenResponse } = (\n    object instanceof FirebaseError ? object.customData : object\n  ) as exp.TaggedWithTokenResponse;\n  if (!_tokenResponse) {\n    return null;\n  }\n\n  // Handle phone Auth credential responses, as they have a different format\n  // from other backend responses (i.e. no providerId). This is also only the\n  // case for user credentials (does not work for errors).\n  if (!(object instanceof FirebaseError)) {\n    if ('temporaryProof' in _tokenResponse && 'phoneNumber' in _tokenResponse) {\n      return exp.PhoneAuthProvider.credentialFromResult(object);\n    }\n  }\n\n  const providerId = _tokenResponse.providerId;\n\n  // Email and password is not supported as there is no situation where the\n  // server would return the password to the client.\n  if (!providerId || providerId === exp.ProviderId.PASSWORD) {\n    return null;\n  }\n\n  let provider: Pick<\n    typeof exp.OAuthProvider,\n    'credentialFromResult' | 'credentialFromError'\n  >;\n  switch (providerId) {\n    case exp.ProviderId.GOOGLE:\n      provider = exp.GoogleAuthProvider;\n      break;\n    case exp.ProviderId.FACEBOOK:\n      provider = exp.FacebookAuthProvider;\n      break;\n    case exp.ProviderId.GITHUB:\n      provider = exp.GithubAuthProvider;\n      break;\n    case exp.ProviderId.TWITTER:\n      provider = exp.TwitterAuthProvider;\n      break;\n    default:\n      const {\n        oauthIdToken,\n        oauthAccessToken,\n        oauthTokenSecret,\n        pendingToken,\n        nonce\n      } = _tokenResponse as exp.SignInWithIdpResponse;\n      if (\n        !oauthAccessToken &&\n        !oauthTokenSecret &&\n        !oauthIdToken &&\n        !pendingToken\n      ) {\n        return null;\n      }\n      // TODO(avolkovi): uncomment this and get it working with SAML & OIDC\n      if (pendingToken) {\n        if (providerId.startsWith('saml.')) {\n          return exp.SAMLAuthCredential._create(providerId, pendingToken);\n        } else {\n          // OIDC and non-default providers excluding Twitter.\n          return exp.OAuthCredential._fromParams({\n            providerId,\n            signInMethod: providerId,\n            pendingToken,\n            idToken: oauthIdToken,\n            accessToken: oauthAccessToken\n          });\n        }\n      }\n      return new exp.OAuthProvider(providerId).credential({\n        idToken: oauthIdToken,\n        accessToken: oauthAccessToken,\n        rawNonce: nonce\n      });\n  }\n\n  return object instanceof FirebaseError\n    ? provider.credentialFromError(object)\n    : provider.credentialFromResult(object);\n}\n\nexport function convertCredential(\n  auth: exp.Auth,\n  credentialPromise: Promise<exp.UserCredential>\n): Promise<compat.UserCredential> {\n  return credentialPromise\n    .catch(e => {\n      if (e instanceof FirebaseError) {\n        attachExtraErrorFields(auth, e);\n      }\n      throw e;\n    })\n    .then(credential => {\n      const operationType = credential.operationType;\n      const user = credential.user;\n\n      return {\n        operationType,\n        credential: credentialFromResponse(\n          credential as exp.UserCredentialInternal\n        ),\n        additionalUserInfo: exp.getAdditionalUserInfo(\n          credential as exp.UserCredential\n        ),\n        user: User.getOrCreate(user)\n      };\n    });\n}\n\nexport async function convertConfirmationResult(\n  auth: exp.Auth,\n  confirmationResultPromise: Promise<exp.ConfirmationResult>\n): Promise<compat.ConfirmationResult> {\n  const confirmationResultExp = await confirmationResultPromise;\n  return {\n    verificationId: confirmationResultExp.verificationId,\n    confirm: (verificationCode: string) =>\n      convertCredential(auth, confirmationResultExp.confirm(verificationCode))\n  };\n}\n\nclass MultiFactorResolver implements compat.MultiFactorResolver {\n  readonly auth: Auth;\n  constructor(\n    auth: exp.Auth,\n    private readonly resolver: exp.MultiFactorResolver\n  ) {\n    this.auth = wrapped(auth);\n  }\n\n  get session(): compat.MultiFactorSession {\n    return this.resolver.session;\n  }\n\n  get hints(): compat.MultiFactorInfo[] {\n    return this.resolver.hints;\n  }\n\n  resolveSignIn(\n    assertion: compat.MultiFactorAssertion\n  ): Promise<compat.UserCredential> {\n    return convertCredential(\n      unwrap(this.auth),\n      this.resolver.resolveSignIn(assertion as exp.MultiFactorAssertion)\n    );\n  }\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport * as exp from '@firebase/auth/internal';\nimport * as compat from '@firebase/auth-types';\nimport { Compat } from '@firebase/util';\nimport { _savePersistenceForRedirect } from './persistence';\nimport { CompatPopupRedirectResolver } from './popup_redirect';\nimport {\n  convertConfirmationResult,\n  convertCredential\n} from './user_credential';\n\nexport class User implements compat.User, Compat<exp.User> {\n  // Maintain a map so that there's always a 1:1 mapping between new User and\n  // legacy compat users\n  private static readonly USER_MAP = new WeakMap<exp.User, User>();\n\n  readonly multiFactor: compat.MultiFactorUser;\n\n  private constructor(readonly _delegate: exp.User) {\n    this.multiFactor = exp.multiFactor(_delegate);\n  }\n\n  static getOrCreate(user: exp.User): User {\n    if (!User.USER_MAP.has(user)) {\n      User.USER_MAP.set(user, new User(user));\n    }\n\n    return User.USER_MAP.get(user)!;\n  }\n\n  delete(): Promise<void> {\n    return this._delegate.delete();\n  }\n  reload(): Promise<void> {\n    return this._delegate.reload();\n  }\n  toJSON(): object {\n    return this._delegate.toJSON();\n  }\n  getIdTokenResult(forceRefresh?: boolean): Promise<compat.IdTokenResult> {\n    return this._delegate.getIdTokenResult(forceRefresh);\n  }\n  getIdToken(forceRefresh?: boolean): Promise<string> {\n    return this._delegate.getIdToken(forceRefresh);\n  }\n  linkAndRetrieveDataWithCredential(\n    credential: compat.AuthCredential\n  ): Promise<compat.UserCredential> {\n    return this.linkWithCredential(credential);\n  }\n  async linkWithCredential(\n    credential: compat.AuthCredential\n  ): Promise<compat.UserCredential> {\n    return convertCredential(\n      this.auth,\n      exp.linkWithCredential(this._delegate, credential as exp.AuthCredential)\n    );\n  }\n  async linkWithPhoneNumber(\n    phoneNumber: string,\n    applicationVerifier: compat.ApplicationVerifier\n  ): Promise<compat.ConfirmationResult> {\n    return convertConfirmationResult(\n      this.auth,\n      exp.linkWithPhoneNumber(this._delegate, phoneNumber, applicationVerifier)\n    );\n  }\n  async linkWithPopup(\n    provider: compat.AuthProvider\n  ): Promise<compat.UserCredential> {\n    return convertCredential(\n      this.auth,\n      exp.linkWithPopup(\n        this._delegate,\n        provider as exp.AuthProvider,\n        CompatPopupRedirectResolver\n      )\n    );\n  }\n  async linkWithRedirect(provider: compat.AuthProvider): Promise<void> {\n    await _savePersistenceForRedirect(exp._castAuth(this.auth));\n    return exp.linkWithRedirect(\n      this._delegate,\n      provider as exp.AuthProvider,\n      CompatPopupRedirectResolver\n    );\n  }\n  reauthenticateAndRetrieveDataWithCredential(\n    credential: compat.AuthCredential\n  ): Promise<compat.UserCredential> {\n    return this.reauthenticateWithCredential(credential);\n  }\n  async reauthenticateWithCredential(\n    credential: compat.AuthCredential\n  ): Promise<compat.UserCredential> {\n    return convertCredential(\n      this.auth as unknown as exp.Auth,\n      exp.reauthenticateWithCredential(\n        this._delegate,\n        credential as exp.AuthCredential\n      )\n    );\n  }\n  reauthenticateWithPhoneNumber(\n    phoneNumber: string,\n    applicationVerifier: compat.ApplicationVerifier\n  ): Promise<compat.ConfirmationResult> {\n    return convertConfirmationResult(\n      this.auth,\n      exp.reauthenticateWithPhoneNumber(\n        this._delegate,\n        phoneNumber,\n        applicationVerifier\n      )\n    );\n  }\n  reauthenticateWithPopup(\n    provider: compat.AuthProvider\n  ): Promise<compat.UserCredential> {\n    return convertCredential(\n      this.auth,\n      exp.reauthenticateWithPopup(\n        this._delegate,\n        provider as exp.AuthProvider,\n        CompatPopupRedirectResolver\n      )\n    );\n  }\n  async reauthenticateWithRedirect(\n    provider: compat.AuthProvider\n  ): Promise<void> {\n    await _savePersistenceForRedirect(exp._castAuth(this.auth));\n    return exp.reauthenticateWithRedirect(\n      this._delegate,\n      provider as exp.AuthProvider,\n      CompatPopupRedirectResolver\n    );\n  }\n  sendEmailVerification(\n    actionCodeSettings?: compat.ActionCodeSettings | null\n  ): Promise<void> {\n    return exp.sendEmailVerification(this._delegate, actionCodeSettings);\n  }\n  async unlink(providerId: string): Promise<compat.User> {\n    await exp.unlink(this._delegate, providerId);\n    return this;\n  }\n  updateEmail(newEmail: string): Promise<void> {\n    return exp.updateEmail(this._delegate, newEmail);\n  }\n  updatePassword(newPassword: string): Promise<void> {\n    return exp.updatePassword(this._delegate, newPassword);\n  }\n  updatePhoneNumber(phoneCredential: compat.AuthCredential): Promise<void> {\n    return exp.updatePhoneNumber(\n      this._delegate,\n      phoneCredential as exp.PhoneAuthCredential\n    );\n  }\n  updateProfile(profile: {\n    displayName?: string | null;\n    photoURL?: string | null;\n  }): Promise<void> {\n    return exp.updateProfile(this._delegate, profile);\n  }\n  verifyBeforeUpdateEmail(\n    newEmail: string,\n    actionCodeSettings?: compat.ActionCodeSettings | null\n  ): Promise<void> {\n    return exp.verifyBeforeUpdateEmail(\n      this._delegate,\n      newEmail,\n      actionCodeSettings\n    );\n  }\n  get emailVerified(): boolean {\n    return this._delegate.emailVerified;\n  }\n  get isAnonymous(): boolean {\n    return this._delegate.isAnonymous;\n  }\n  get metadata(): compat.UserMetadata {\n    return this._delegate.metadata;\n  }\n  get phoneNumber(): string | null {\n    return this._delegate.phoneNumber;\n  }\n  get providerData(): Array<compat.UserInfo | null> {\n    return this._delegate.providerData;\n  }\n  get refreshToken(): string {\n    return this._delegate.refreshToken;\n  }\n  get tenantId(): string | null {\n    return this._delegate.tenantId;\n  }\n  get displayName(): string | null {\n    return this._delegate.displayName;\n  }\n  get email(): string | null {\n    return this._delegate.email;\n  }\n  get photoURL(): string | null {\n    return this._delegate.photoURL;\n  }\n  get providerId(): string {\n    return this._delegate.providerId;\n  }\n  get uid(): string {\n    return this._delegate.uid;\n  }\n  private get auth(): exp.Auth {\n    return (this._delegate as exp.UserImpl).auth as unknown as exp.Auth;\n  }\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { FirebaseApp, _FirebaseService } from '@firebase/app-compat';\nimport * as exp from '@firebase/auth/internal';\nimport * as compat from '@firebase/auth-types';\nimport { Provider } from '@firebase/component';\nimport { ErrorFn, Observer, Unsubscribe } from '@firebase/util';\n\nimport {\n  _validatePersistenceArgument,\n  Persistence,\n  _getPersistencesFromRedirect,\n  _savePersistenceForRedirect\n} from './persistence';\nimport { _isPopupRedirectSupported } from './platform';\nimport { CompatPopupRedirectResolver } from './popup_redirect';\nimport { User } from './user';\nimport {\n  convertConfirmationResult,\n  convertCredential\n} from './user_credential';\nimport { ReverseWrapper, Wrapper } from './wrap';\n\nconst _assert: typeof exp._assert = exp._assert;\n\nexport class Auth\n  implements compat.FirebaseAuth, Wrapper<exp.Auth>, _FirebaseService\n{\n  static Persistence = Persistence;\n  readonly _delegate: exp.AuthImpl;\n\n  constructor(readonly app: FirebaseApp, provider: Provider<'auth'>) {\n    if (provider.isInitialized()) {\n      this._delegate = provider.getImmediate() as exp.AuthImpl;\n      this.linkUnderlyingAuth();\n      return;\n    }\n\n    const { apiKey } = app.options;\n    // TODO: platform needs to be determined using heuristics\n    _assert(apiKey, exp.AuthErrorCode.INVALID_API_KEY, {\n      appName: app.name\n    });\n\n    let persistences: exp.Persistence[] = [exp.inMemoryPersistence];\n\n    // Only deal with persistences in web environments\n    if (typeof window !== 'undefined') {\n      // Note this is slightly different behavior: in this case, the stored\n      // persistence is checked *first* rather than last. This is because we want\n      // to prefer stored persistence type in the hierarchy.\n      persistences = _getPersistencesFromRedirect(apiKey, app.name);\n\n      for (const persistence of [\n        exp.indexedDBLocalPersistence,\n        exp.browserLocalPersistence,\n        exp.browserSessionPersistence\n      ]) {\n        if (!persistences.includes(persistence)) {\n          persistences.push(persistence);\n        }\n      }\n    }\n\n    // TODO: platform needs to be determined using heuristics\n    _assert(apiKey, exp.AuthErrorCode.INVALID_API_KEY, {\n      appName: app.name\n    });\n\n    // Only use a popup/redirect resolver in browser environments\n    const resolver =\n      typeof window !== 'undefined' ? CompatPopupRedirectResolver : undefined;\n    this._delegate = provider.initialize({\n      options: {\n        persistence: persistences,\n        popupRedirectResolver: resolver\n      }\n    }) as exp.AuthImpl;\n\n    this._delegate._updateErrorMap(exp.debugErrorMap);\n    this.linkUnderlyingAuth();\n  }\n\n  get emulatorConfig(): compat.EmulatorConfig | null {\n    return this._delegate.emulatorConfig;\n  }\n\n  get currentUser(): compat.User | null {\n    if (!this._delegate.currentUser) {\n      return null;\n    }\n\n    return User.getOrCreate(this._delegate.currentUser);\n  }\n  get languageCode(): string | null {\n    return this._delegate.languageCode;\n  }\n  set languageCode(languageCode: string | null) {\n    this._delegate.languageCode = languageCode;\n  }\n  get settings(): compat.AuthSettings {\n    return this._delegate.settings;\n  }\n  get tenantId(): string | null {\n    return this._delegate.tenantId;\n  }\n  set tenantId(tid: string | null) {\n    this._delegate.tenantId = tid;\n  }\n  useDeviceLanguage(): void {\n    this._delegate.useDeviceLanguage();\n  }\n  signOut(): Promise<void> {\n    return this._delegate.signOut();\n  }\n  useEmulator(url: string, options?: { disableWarnings: boolean }): void {\n    exp.connectAuthEmulator(this._delegate, url, options);\n  }\n  applyActionCode(code: string): Promise<void> {\n    return exp.applyActionCode(this._delegate, code);\n  }\n\n  checkActionCode(code: string): Promise<compat.ActionCodeInfo> {\n    return exp.checkActionCode(this._delegate, code);\n  }\n\n  confirmPasswordReset(code: string, newPassword: string): Promise<void> {\n    return exp.confirmPasswordReset(this._delegate, code, newPassword);\n  }\n\n  async createUserWithEmailAndPassword(\n    email: string,\n    password: string\n  ): Promise<compat.UserCredential> {\n    return convertCredential(\n      this._delegate,\n      exp.createUserWithEmailAndPassword(this._delegate, email, password)\n    );\n  }\n  fetchProvidersForEmail(email: string): Promise<string[]> {\n    return this.fetchSignInMethodsForEmail(email);\n  }\n  fetchSignInMethodsForEmail(email: string): Promise<string[]> {\n    return exp.fetchSignInMethodsForEmail(this._delegate, email);\n  }\n  isSignInWithEmailLink(emailLink: string): boolean {\n    return exp.isSignInWithEmailLink(this._delegate, emailLink);\n  }\n  async getRedirectResult(): Promise<compat.UserCredential> {\n    _assert(\n      _isPopupRedirectSupported(),\n      this._delegate,\n      exp.AuthErrorCode.OPERATION_NOT_SUPPORTED\n    );\n    const credential = await exp.getRedirectResult(\n      this._delegate,\n      CompatPopupRedirectResolver\n    );\n    if (!credential) {\n      return {\n        credential: null,\n        user: null\n      };\n    }\n    return convertCredential(this._delegate, Promise.resolve(credential));\n  }\n\n  // This function should only be called by frameworks (e.g. FirebaseUI-web) to log their usage.\n  // It is not intended for direct use by developer apps. NO jsdoc here to intentionally leave it\n  // out of autogenerated documentation pages to reduce accidental misuse.\n  addFrameworkForLogging(framework: string): void {\n    exp.addFrameworkForLogging(this._delegate, framework);\n  }\n\n  onAuthStateChanged(\n    nextOrObserver: Observer<unknown> | ((a: compat.User | null) => unknown),\n    errorFn?: (error: compat.Error) => unknown,\n    completed?: Unsubscribe\n  ): Unsubscribe {\n    const { next, error, complete } = wrapObservers(\n      nextOrObserver,\n      errorFn,\n      completed\n    );\n    return this._delegate.onAuthStateChanged(next!, error, complete);\n  }\n  onIdTokenChanged(\n    nextOrObserver: Observer<unknown> | ((a: compat.User | null) => unknown),\n    errorFn?: (error: compat.Error) => unknown,\n    completed?: Unsubscribe\n  ): Unsubscribe {\n    const { next, error, complete } = wrapObservers(\n      nextOrObserver,\n      errorFn,\n      completed\n    );\n    return this._delegate.onIdTokenChanged(next!, error, complete);\n  }\n  sendSignInLinkToEmail(\n    email: string,\n    actionCodeSettings: compat.ActionCodeSettings\n  ): Promise<void> {\n    return exp.sendSignInLinkToEmail(this._delegate, email, actionCodeSettings);\n  }\n  sendPasswordResetEmail(\n    email: string,\n    actionCodeSettings?: compat.ActionCodeSettings | null\n  ): Promise<void> {\n    return exp.sendPasswordResetEmail(\n      this._delegate,\n      email,\n      actionCodeSettings || undefined\n    );\n  }\n  async setPersistence(persistence: string): Promise<void> {\n    _validatePersistenceArgument(this._delegate, persistence);\n    let converted;\n    switch (persistence) {\n      case Persistence.SESSION:\n        converted = exp.browserSessionPersistence;\n        break;\n      case Persistence.LOCAL:\n        // Not using isIndexedDBAvailable() since it only checks if indexedDB is defined.\n        const isIndexedDBFullySupported = await exp\n          ._getInstance<exp.PersistenceInternal>(exp.indexedDBLocalPersistence)\n          ._isAvailable();\n        converted = isIndexedDBFullySupported\n          ? exp.indexedDBLocalPersistence\n          : exp.browserLocalPersistence;\n        break;\n      case Persistence.NONE:\n        converted = exp.inMemoryPersistence;\n        break;\n      default:\n        return exp._fail(exp.AuthErrorCode.ARGUMENT_ERROR, {\n          appName: this._delegate.name\n        });\n    }\n\n    return this._delegate.setPersistence(converted);\n  }\n\n  signInAndRetrieveDataWithCredential(\n    credential: compat.AuthCredential\n  ): Promise<compat.UserCredential> {\n    return this.signInWithCredential(credential);\n  }\n  signInAnonymously(): Promise<compat.UserCredential> {\n    return convertCredential(\n      this._delegate,\n      exp.signInAnonymously(this._delegate)\n    );\n  }\n  signInWithCredential(\n    credential: compat.AuthCredential\n  ): Promise<compat.UserCredential> {\n    return convertCredential(\n      this._delegate,\n      exp.signInWithCredential(this._delegate, credential as exp.AuthCredential)\n    );\n  }\n  signInWithCustomToken(token: string): Promise<compat.UserCredential> {\n    return convertCredential(\n      this._delegate,\n      exp.signInWithCustomToken(this._delegate, token)\n    );\n  }\n  signInWithEmailAndPassword(\n    email: string,\n    password: string\n  ): Promise<compat.UserCredential> {\n    return convertCredential(\n      this._delegate,\n      exp.signInWithEmailAndPassword(this._delegate, email, password)\n    );\n  }\n  signInWithEmailLink(\n    email: string,\n    emailLink?: string\n  ): Promise<compat.UserCredential> {\n    return convertCredential(\n      this._delegate,\n      exp.signInWithEmailLink(this._delegate, email, emailLink)\n    );\n  }\n  signInWithPhoneNumber(\n    phoneNumber: string,\n    applicationVerifier: compat.ApplicationVerifier\n  ): Promise<compat.ConfirmationResult> {\n    return convertConfirmationResult(\n      this._delegate,\n      exp.signInWithPhoneNumber(\n        this._delegate,\n        phoneNumber,\n        applicationVerifier\n      )\n    );\n  }\n  async signInWithPopup(\n    provider: compat.AuthProvider\n  ): Promise<compat.UserCredential> {\n    _assert(\n      _isPopupRedirectSupported(),\n      this._delegate,\n      exp.AuthErrorCode.OPERATION_NOT_SUPPORTED\n    );\n    return convertCredential(\n      this._delegate,\n      exp.signInWithPopup(\n        this._delegate,\n        provider as exp.AuthProvider,\n        CompatPopupRedirectResolver\n      )\n    );\n  }\n  async signInWithRedirect(provider: compat.AuthProvider): Promise<void> {\n    _assert(\n      _isPopupRedirectSupported(),\n      this._delegate,\n      exp.AuthErrorCode.OPERATION_NOT_SUPPORTED\n    );\n\n    await _savePersistenceForRedirect(this._delegate);\n    return exp.signInWithRedirect(\n      this._delegate,\n      provider as exp.AuthProvider,\n      CompatPopupRedirectResolver\n    );\n  }\n  updateCurrentUser(user: compat.User | null): Promise<void> {\n    // remove ts-ignore once overloads are defined for exp functions to accept compat objects\n    // @ts-ignore\n    return this._delegate.updateCurrentUser(user);\n  }\n  verifyPasswordResetCode(code: string): Promise<string> {\n    return exp.verifyPasswordResetCode(this._delegate, code);\n  }\n  unwrap(): exp.Auth {\n    return this._delegate;\n  }\n  _delete(): Promise<void> {\n    return this._delegate._delete();\n  }\n  private linkUnderlyingAuth(): void {\n    (this._delegate as unknown as ReverseWrapper<Auth>).wrapped = () => this;\n  }\n}\n\nfunction wrapObservers(\n  nextOrObserver: Observer<unknown> | ((a: compat.User | null) => unknown),\n  error?: (error: compat.Error) => unknown,\n  complete?: Unsubscribe\n): Partial<Observer<exp.User | null>> {\n  let next = nextOrObserver;\n  if (typeof nextOrObserver !== 'function') {\n    ({ next, error, complete } = nextOrObserver);\n  }\n\n  // We know 'next' is now a function\n  const oldNext = next as (a: compat.User | null) => unknown;\n\n  const newNext = (user: exp.User | null): unknown =>\n    oldNext(user && User.getOrCreate(user as exp.User));\n  return {\n    next: newNext,\n    error: error as ErrorFn,\n    complete\n  };\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport * as exp from '@firebase/auth/internal';\nimport * as compat from '@firebase/auth-types';\nimport firebase from '@firebase/app-compat';\nimport { Compat } from '@firebase/util';\nimport { unwrap } from './wrap';\n\nexport class PhoneAuthProvider\n  implements compat.PhoneAuthProvider, Compat<exp.PhoneAuthProvider>\n{\n  providerId = 'phone';\n  readonly _delegate: exp.PhoneAuthProvider;\n\n  static PHONE_SIGN_IN_METHOD = exp.PhoneAuthProvider.PHONE_SIGN_IN_METHOD;\n  static PROVIDER_ID = exp.PhoneAuthProvider.PROVIDER_ID;\n\n  static credential(\n    verificationId: string,\n    verificationCode: string\n  ): compat.AuthCredential {\n    return exp.PhoneAuthProvider.credential(verificationId, verificationCode);\n  }\n\n  constructor() {\n    // TODO: remove ts-ignore when moving types from auth-types to auth-compat\n    // @ts-ignore\n    this._delegate = new exp.PhoneAuthProvider(unwrap(firebase.auth!()));\n  }\n\n  verifyPhoneNumber(\n    phoneInfoOptions:\n      | string\n      | compat.PhoneSingleFactorInfoOptions\n      | compat.PhoneMultiFactorEnrollInfoOptions\n      | compat.PhoneMultiFactorSignInInfoOptions,\n    applicationVerifier: compat.ApplicationVerifier\n  ): Promise<string> {\n    return this._delegate.verifyPhoneNumber(\n      // The implementation matches but the types are subtly incompatible\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      phoneInfoOptions as any,\n      applicationVerifier\n    );\n  }\n\n  unwrap(): exp.PhoneAuthProvider {\n    return this._delegate;\n  }\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport firebase, { FirebaseApp } from '@firebase/app-compat';\nimport * as exp from '@firebase/auth/internal';\nimport * as compat from '@firebase/auth-types';\nimport { Compat } from '@firebase/util';\n\nconst _assert: typeof exp._assert = exp._assert;\n\nexport class RecaptchaVerifier\n  implements compat.RecaptchaVerifier, Compat<exp.ApplicationVerifier>\n{\n  readonly _delegate: exp.RecaptchaVerifier;\n  type: string;\n  constructor(\n    container: HTMLElement | string,\n    parameters?: object | null,\n    app: FirebaseApp = firebase.app()\n  ) {\n    // API key is required for web client RPC calls.\n    _assert(app.options?.apiKey, exp.AuthErrorCode.INVALID_API_KEY, {\n      appName: app.name\n    });\n    this._delegate = new exp.RecaptchaVerifier(\n      container,\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      parameters as any,\n\n      // TODO: remove ts-ignore when moving types from auth-types to auth-compat\n      // @ts-ignore\n      app.auth!()\n    );\n    this.type = this._delegate.type;\n  }\n  clear(): void {\n    this._delegate.clear();\n  }\n  render(): Promise<number> {\n    return this._delegate.render();\n  }\n  verify(): Promise<string> {\n    return this._delegate.verify();\n  }\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/* eslint-disable camelcase */\n\nimport firebase, { _FirebaseNamespace } from '@firebase/app-compat';\nimport * as impl from '@firebase/auth/internal';\nimport {\n  Component,\n  ComponentType,\n  InstantiationMode\n} from '@firebase/component';\nimport { FirebaseError } from '@firebase/util';\n\nimport * as types from '@firebase/auth-types';\nimport { name, version } from './package.json';\nimport { Auth } from './src/auth';\nimport { PhoneAuthProvider as CompatAuthProvider } from './src/phone_auth_provider';\nimport { RecaptchaVerifier as CompatRecaptchaVerifier } from './src/recaptcha_verifier';\n\nconst AUTH_TYPE = 'auth-compat';\n\ndeclare module '@firebase/component' {\n  interface NameServiceMapping {\n    'auth-compat': types.FirebaseAuth;\n  }\n}\n\ndeclare module '@firebase/app-compat' {\n  interface FirebaseNamespace {\n    auth: {\n      (app?: FirebaseApp): types.FirebaseAuth;\n      Auth: typeof types.FirebaseAuth;\n      EmailAuthProvider: typeof types.EmailAuthProvider;\n      EmailAuthProvider_Instance: typeof types.EmailAuthProvider_Instance;\n      FacebookAuthProvider: typeof types.FacebookAuthProvider;\n      FacebookAuthProvider_Instance: typeof types.FacebookAuthProvider_Instance;\n      GithubAuthProvider: typeof types.GithubAuthProvider;\n      GithubAuthProvider_Instance: typeof types.GithubAuthProvider_Instance;\n      GoogleAuthProvider: typeof types.GoogleAuthProvider;\n      GoogleAuthProvider_Instance: typeof types.GoogleAuthProvider_Instance;\n      OAuthProvider: typeof types.OAuthProvider;\n      SAMLAuthProvider: typeof types.SAMLAuthProvider;\n      PhoneAuthProvider: typeof types.PhoneAuthProvider;\n      PhoneAuthProvider_Instance: typeof types.PhoneAuthProvider_Instance;\n      PhoneMultiFactorGenerator: typeof types.PhoneMultiFactorGenerator;\n      RecaptchaVerifier: typeof types.RecaptchaVerifier;\n      RecaptchaVerifier_Instance: typeof types.RecaptchaVerifier_Instance;\n      TwitterAuthProvider: typeof types.TwitterAuthProvider;\n      TwitterAuthProvider_Instance: typeof types.TwitterAuthProvider_Instance;\n    };\n  }\n  interface FirebaseApp {\n    auth?(): types.FirebaseAuth;\n  }\n}\n\n// Create auth components to register with firebase.\n// Provides Auth public APIs.\nfunction registerAuthCompat(instance: _FirebaseNamespace): void {\n  instance.INTERNAL.registerComponent(\n    new Component(\n      AUTH_TYPE,\n      container => {\n        // getImmediate for FirebaseApp will always succeed\n        const app = container.getProvider('app-compat').getImmediate();\n        const authProvider = container.getProvider('auth');\n        return new Auth(app, authProvider);\n      },\n      ComponentType.PUBLIC\n    )\n      .setServiceProps({\n        ActionCodeInfo: {\n          Operation: {\n            EMAIL_SIGNIN: impl.ActionCodeOperation.EMAIL_SIGNIN,\n            PASSWORD_RESET: impl.ActionCodeOperation.PASSWORD_RESET,\n            RECOVER_EMAIL: impl.ActionCodeOperation.RECOVER_EMAIL,\n            REVERT_SECOND_FACTOR_ADDITION:\n              impl.ActionCodeOperation.REVERT_SECOND_FACTOR_ADDITION,\n            VERIFY_AND_CHANGE_EMAIL:\n              impl.ActionCodeOperation.VERIFY_AND_CHANGE_EMAIL,\n            VERIFY_EMAIL: impl.ActionCodeOperation.VERIFY_EMAIL\n          }\n        },\n        EmailAuthProvider: impl.EmailAuthProvider,\n        FacebookAuthProvider: impl.FacebookAuthProvider,\n        GithubAuthProvider: impl.GithubAuthProvider,\n        GoogleAuthProvider: impl.GoogleAuthProvider,\n        OAuthProvider: impl.OAuthProvider,\n        //   SAMLAuthProvider,\n        PhoneAuthProvider: CompatAuthProvider,\n        PhoneMultiFactorGenerator: impl.PhoneMultiFactorGenerator,\n        RecaptchaVerifier: CompatRecaptchaVerifier,\n        TwitterAuthProvider: impl.TwitterAuthProvider,\n        Auth,\n        AuthCredential: impl.AuthCredential,\n        Error: FirebaseError\n      })\n      .setInstantiationMode(InstantiationMode.LAZY)\n      .setMultipleInstances(false)\n  );\n\n  instance.registerVersion(name, version);\n}\n\nregisterAuthCompat(firebase as _FirebaseNamespace);\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}