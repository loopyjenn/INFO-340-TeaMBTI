{"ast":null,"code":"import React from\"react\";import{useEffect}from\"react\";import{getAuth,GoogleAuthProvider,onAuthStateChanged}from'firebase/auth';import StyledFirebaseAuth from'react-firebaseui/StyledFirebaseAuth';import{useNavigate}from\"react-router-dom\";import{getDatabase,ref,set}from'firebase/database';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export function SignIn(props){const navigate=useNavigate();const auth=getAuth();const database=getDatabase();const firebaseUIConfig={signInOptions:[GoogleAuthProvider.PROVIDER_ID],signInFlow:'popup',credentialHelper:'none',callbacks:{signInSuccessWithAuthResult:authResult=>{const user=authResult.user;const userRef=ref(database,'users/'+user.uid);set(userRef,{email:user.email,displayName:user.displayName||'',photoURL:user.photoURL||'',lastLogin:Date.now(),hobby:null,mbtiType:null,pet:null,song:null}).then(()=>{navigate('/profile');}).catch(error=>{console.error(\"Failed to save user data:\",error);});return false;}}};useEffect(()=>{const changeState=onAuthStateChanged(auth,user=>{if(user){navigate('/profile');}});return()=>changeState();},[navigate,auth]);return/*#__PURE__*/_jsxs(\"div\",{className:\"login-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"welcome-box\",children:/*#__PURE__*/_jsx(\"b\",{children:\"Welcome to teaMBTI\"})}),/*#__PURE__*/_jsx(StyledFirebaseAuth,{uiConfig:firebaseUIConfig,firebaseAuth:auth}),/*#__PURE__*/_jsx(\"div\",{className:\"create-account\",children:/*#__PURE__*/_jsx(\"p\",{className:\"sign-in-tips\",children:\"If you do not have an account before, it will automatically sign up for you.\"})})]});}","map":{"version":3,"names":["React","useEffect","getAuth","GoogleAuthProvider","onAuthStateChanged","StyledFirebaseAuth","useNavigate","getDatabase","ref","set","jsx","_jsx","jsxs","_jsxs","SignIn","props","navigate","auth","database","firebaseUIConfig","signInOptions","PROVIDER_ID","signInFlow","credentialHelper","callbacks","signInSuccessWithAuthResult","authResult","user","userRef","uid","email","displayName","photoURL","lastLogin","Date","now","hobby","mbtiType","pet","song","then","catch","error","console","changeState","className","children","uiConfig","firebaseAuth"],"sources":["/Users/jenn/Desktop/info340/project-jsorror/src/components/SignIn.js"],"sourcesContent":["import React from \"react\";\nimport { useEffect } from \"react\";\nimport { getAuth, GoogleAuthProvider, onAuthStateChanged } from 'firebase/auth';\nimport StyledFirebaseAuth from 'react-firebaseui/StyledFirebaseAuth';\nimport { useNavigate } from \"react-router-dom\";\nimport { getDatabase, ref, set } from 'firebase/database';\n\n\nexport function SignIn(props) {\n\n    const navigate = useNavigate();\n    const auth = getAuth();\n    const database = getDatabase();\n\n    const firebaseUIConfig = {\n        signInOptions: [GoogleAuthProvider.PROVIDER_ID],\n        signInFlow: 'popup',\n        credentialHelper: 'none',\n        callbacks: {\n            signInSuccessWithAuthResult: (authResult) => {\n                const user = authResult.user;\n                const userRef = ref(database, 'users/' + user.uid);\n                set(userRef, {\n                    email: user.email,\n                    displayName: user.displayName || '',\n                    photoURL: user.photoURL || '',\n                    lastLogin: Date.now(),\n                    hobby: null,\n                    mbtiType: null,\n                    pet: null,\n                    song: null\n                })\n                .then(() => {\n                    navigate('/profile');\n                })\n                .catch(error => {\n                    console.error(\"Failed to save user data:\", error);\n                });\n                return false;\n            }\n        }\n    };\n\n\n    useEffect(() => {\n        const changeState = onAuthStateChanged(auth, user => {\n            if (user) {\n                navigate('/profile');\n            }\n        });\n        return () => changeState();\n    }, [navigate, auth]);\n\n\n    return (\n        <div className=\"login-container\">\n            <div className=\"welcome-box\"><b>Welcome to teaMBTI</b></div>\n            <StyledFirebaseAuth uiConfig={firebaseUIConfig} firebaseAuth={auth} />\n            <div className=\"create-account\">\n                <p className=\"sign-in-tips\">If you do not have an account before, it will automatically sign up for you.</p>\n            </div>\n        </div>\n    );\n}"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,OAASC,SAAS,KAAQ,OAAO,CACjC,OAASC,OAAO,CAAEC,kBAAkB,CAAEC,kBAAkB,KAAQ,eAAe,CAC/E,MAAO,CAAAC,kBAAkB,KAAM,qCAAqC,CACpE,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,OAASC,WAAW,CAAEC,GAAG,CAAEC,GAAG,KAAQ,mBAAmB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAG1D,MAAO,SAAS,CAAAC,MAAMA,CAACC,KAAK,CAAE,CAE1B,KAAM,CAAAC,QAAQ,CAAGV,WAAW,CAAC,CAAC,CAC9B,KAAM,CAAAW,IAAI,CAAGf,OAAO,CAAC,CAAC,CACtB,KAAM,CAAAgB,QAAQ,CAAGX,WAAW,CAAC,CAAC,CAE9B,KAAM,CAAAY,gBAAgB,CAAG,CACrBC,aAAa,CAAE,CAACjB,kBAAkB,CAACkB,WAAW,CAAC,CAC/CC,UAAU,CAAE,OAAO,CACnBC,gBAAgB,CAAE,MAAM,CACxBC,SAAS,CAAE,CACPC,2BAA2B,CAAGC,UAAU,EAAK,CACzC,KAAM,CAAAC,IAAI,CAAGD,UAAU,CAACC,IAAI,CAC5B,KAAM,CAAAC,OAAO,CAAGpB,GAAG,CAACU,QAAQ,CAAE,QAAQ,CAAGS,IAAI,CAACE,GAAG,CAAC,CAClDpB,GAAG,CAACmB,OAAO,CAAE,CACTE,KAAK,CAAEH,IAAI,CAACG,KAAK,CACjBC,WAAW,CAAEJ,IAAI,CAACI,WAAW,EAAI,EAAE,CACnCC,QAAQ,CAAEL,IAAI,CAACK,QAAQ,EAAI,EAAE,CAC7BC,SAAS,CAAEC,IAAI,CAACC,GAAG,CAAC,CAAC,CACrBC,KAAK,CAAE,IAAI,CACXC,QAAQ,CAAE,IAAI,CACdC,GAAG,CAAE,IAAI,CACTC,IAAI,CAAE,IACV,CAAC,CAAC,CACDC,IAAI,CAAC,IAAM,CACRxB,QAAQ,CAAC,UAAU,CAAC,CACxB,CAAC,CAAC,CACDyB,KAAK,CAACC,KAAK,EAAI,CACZC,OAAO,CAACD,KAAK,CAAC,2BAA2B,CAAEA,KAAK,CAAC,CACrD,CAAC,CAAC,CACF,MAAO,MAAK,CAChB,CACJ,CACJ,CAAC,CAGDzC,SAAS,CAAC,IAAM,CACZ,KAAM,CAAA2C,WAAW,CAAGxC,kBAAkB,CAACa,IAAI,CAAEU,IAAI,EAAI,CACjD,GAAIA,IAAI,CAAE,CACNX,QAAQ,CAAC,UAAU,CAAC,CACxB,CACJ,CAAC,CAAC,CACF,MAAO,IAAM4B,WAAW,CAAC,CAAC,CAC9B,CAAC,CAAE,CAAC5B,QAAQ,CAAEC,IAAI,CAAC,CAAC,CAGpB,mBACIJ,KAAA,QAAKgC,SAAS,CAAC,iBAAiB,CAAAC,QAAA,eAC5BnC,IAAA,QAAKkC,SAAS,CAAC,aAAa,CAAAC,QAAA,cAACnC,IAAA,MAAAmC,QAAA,CAAG,oBAAkB,CAAG,CAAC,CAAK,CAAC,cAC5DnC,IAAA,CAACN,kBAAkB,EAAC0C,QAAQ,CAAE5B,gBAAiB,CAAC6B,YAAY,CAAE/B,IAAK,CAAE,CAAC,cACtEN,IAAA,QAAKkC,SAAS,CAAC,gBAAgB,CAAAC,QAAA,cAC3BnC,IAAA,MAAGkC,SAAS,CAAC,cAAc,CAAAC,QAAA,CAAC,8EAA4E,CAAG,CAAC,CAC3G,CAAC,EACL,CAAC,CAEd","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}